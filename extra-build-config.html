
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Optional build configuration &#8212; meta-raspberrypi master documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'master',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Extra apps" href="extra-apps.html" />
    <link rel="prev" title="Layer Contents" href="layer-contents.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="optional-build-configuration">
<span id="optional-build-configuration"></span><h1>Optional build configuration<a class="headerlink" href="#optional-build-configuration" title="Permalink to this headline">¶</a></h1>
<p>There are a set of ways in which a user can influence different paramenters of
the build. We list here the ones that are closely related to this BSP or
specific to it. For the rest please check:
<a class="reference external" href="http://www.yoctoproject.org/docs/latest/ref-manual/ref-manual.html">http://www.yoctoproject.org/docs/latest/ref-manual/ref-manual.html</a></p>
<div class="section" id="compressed-deployed-files">
<span id="compressed-deployed-files"></span><h2>Compressed deployed files<a class="headerlink" href="#compressed-deployed-files" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li>Overwrite IMAGE_FSTYPES in local.conf<ul>
<li><code class="docutils literal"><span class="pre">IMAGE_FSTYPES</span> <span class="pre">=</span> <span class="pre">&quot;tar.bz2</span> <span class="pre">ext3.xz&quot;</span></code></li>
</ul>
</li>
<li>Overwrite SDIMG_ROOTFS_TYPE in local.conf<ul>
<li><code class="docutils literal"><span class="pre">SDIMG_ROOTFS_TYPE</span> <span class="pre">=</span> <span class="pre">&quot;ext3.xz&quot;</span></code></li>
</ul>
</li>
<li>Overwrite SDIMG_COMPRESSION in local.conf<ul>
<li><code class="docutils literal"><span class="pre">SDIMG_COMPRESSION</span> <span class="pre">=</span> <span class="pre">&quot;xz&quot;</span></code></li>
</ul>
</li>
</ol>
<p>Accommodate the values above to your own needs (ex: ext3 / ext4).</p>
</div>
<div class="section" id="gpu-memory">
<span id="gpu-memory"></span><h2>GPU memory<a class="headerlink" href="#gpu-memory" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">GPU_MEM</span></code>: GPU memory in megabyte. Sets the memory split between the ARM and
GPU. ARM gets the remaining memory. Min 16. Default 64.</li>
<li><code class="docutils literal"><span class="pre">GPU_MEM_256</span></code>: GPU memory in megabyte for the 256MB Raspberry Pi. Ignored by
the 512MB RP. Overrides gpu_mem. Max 192. Default not set.</li>
<li><code class="docutils literal"><span class="pre">GPU_MEM_512</span></code>: GPU memory in megabyte for the 512MB Raspberry Pi. Ignored by
the 256MB RP. Overrides gpu_mem. Max 448. Default not set.</li>
<li><code class="docutils literal"><span class="pre">GPU_MEM_1024</span></code>: GPU memory in megabyte for the 1024MB Raspberry Pi. Ignored by
the 256MB/512MB RP. Overrides gpu_mem. Max 944. Default not set.</li>
</ul>
</div>
<div class="section" id="add-purchased-license-codecs">
<span id="add-purchased-license-codecs"></span><h2>Add purchased license codecs<a class="headerlink" href="#add-purchased-license-codecs" title="Permalink to this headline">¶</a></h2>
<p>To add you own licenses use variables <code class="docutils literal"><span class="pre">KEY_DECODE_MPG2</span></code> and <code class="docutils literal"><span class="pre">KEY_DECODE_WVC1</span></code> in
local.conf. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">KEY_DECODE_MPG2</span> <span class="o">=</span> <span class="s2">&quot;12345678&quot;</span>
<span class="n">KEY_DECODE_WVC1</span> <span class="o">=</span> <span class="s2">&quot;12345678&quot;</span>
</pre></div>
</div>
<p>You can supply more licenses separated by comma. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">KEY_DECODE_WVC1</span> <span class="o">=</span> <span class="s2">&quot;0x12345678,0xabcdabcd,0x87654321&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="disable-overscan">
<span id="disable-overscan"></span><h2>Disable overscan<a class="headerlink" href="#disable-overscan" title="Permalink to this headline">¶</a></h2>
<p>By default the GPU adds a black border around the video output to compensate for
TVs which cut off part of the image. To disable this set this variable in
local.conf:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DISABLE_OVERSCAN</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="set-overclocking-options">
<span id="set-overclocking-options"></span><h2>Set overclocking options<a class="headerlink" href="#set-overclocking-options" title="Permalink to this headline">¶</a></h2>
<p>The Raspberry PI can be overclocked. As of now overclocking up to the &quot;Turbo
Mode&quot; is officially supported by the raspbery and does not void warranty. Check
the config.txt for a detailed description of options and modes. Example turbo
mode:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ARM_FREQ</span> <span class="o">=</span> <span class="s2">&quot;1000&quot;</span>
<span class="n">CORE_FREQ</span> <span class="o">=</span> <span class="s2">&quot;500&quot;</span>
<span class="n">SDRAM_FREQ</span> <span class="o">=</span> <span class="s2">&quot;500&quot;</span>
<span class="n">OVER_VOLTAGE</span> <span class="o">=</span> <span class="s2">&quot;6&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="video-camera-support-with-v4l2-drivers">
<span id="video-camera-support-with-v4l2-drivers"></span><h2>Video camera support with V4L2 drivers<a class="headerlink" href="#video-camera-support-with-v4l2-drivers" title="Permalink to this headline">¶</a></h2>
<p>Set this variable to enable support for the video camera (Linux 3.12.4+
required):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">VIDEO_CAMERA</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="enable-offline-compositing-support">
<span id="enable-offline-compositing-support"></span><h2>Enable offline compositing support<a class="headerlink" href="#enable-offline-compositing-support" title="Permalink to this headline">¶</a></h2>
<p>Set this variable to enable support for dispmanx offline compositing:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DISPMANX_OFFLINE</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</pre></div>
</div>
<p>This will enable the firmware to fall back to off-line compositing of Dispmanx
elements. Normally the compositing is done on-line, during scanout, but cannot
handle too many elements. With off-line enabled, an off-screen buffer is
allocated for compositing. When scene complexity (number and sizes
of elements) is high, compositing will happen off-line into the buffer.</p>
<p>Heavily recommended for Wayland/Weston.</p>
<p>See: <a class="reference external" href="http://wayland.freedesktop.org/raspberrypi.html">http://wayland.freedesktop.org/raspberrypi.html</a></p>
</div>
<div class="section" id="enable-kgdb-over-console-support">
<span id="enable-kgdb-over-console-support"></span><h2>Enable kgdb over console support<a class="headerlink" href="#enable-kgdb-over-console-support" title="Permalink to this headline">¶</a></h2>
<p>To add the kdbg over console (kgdboc) parameter to the kernel command line, set
this variable in local.conf:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ENABLE_KGDB</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="boot-to-u-boot">
<span id="boot-to-u-boot"></span><h2>Boot to U-Boot<a class="headerlink" href="#boot-to-u-boot" title="Permalink to this headline">¶</a></h2>
<p>To have u-boot load kernel image, set in your local.conf:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">KERNEL_IMAGETYPE</span> <span class="o">=</span> <span class="s2">&quot;uImage&quot;</span>
</pre></div>
</div>
<p>This will make kernel.img be u-boot image which will load uImage. By default,
kernel.img is the actual kernel image (ex. Image).</p>
</div>
<div class="section" id="image-with-initramfs">
<span id="image-with-initramfs"></span><h2>Image with Initramfs<a class="headerlink" href="#image-with-initramfs" title="Permalink to this headline">¶</a></h2>
<p>To build an initramfs image:</p>
<ul class="simple">
<li>Set this 3 kernel variables (in linux-raspberrypi.inc for example)<ul>
<li>kernel_configure_variable BLK_DEV_INITRD y</li>
<li>kernel_configure_variable INITRAMFS_SOURCE &quot;&quot;</li>
<li>kernel_configure_variable RD_GZIP y</li>
</ul>
</li>
<li>Set the yocto variables (in linux-raspberrypi.inc for example)<ul>
<li><code class="docutils literal"><span class="pre">INITRAMFS_IMAGE</span> <span class="pre">=</span> <span class="pre">&quot;&lt;a</span> <span class="pre">name</span> <span class="pre">for</span> <span class="pre">your</span> <span class="pre">initramfs</span> <span class="pre">image&gt;&quot;</span></code></li>
<li><code class="docutils literal"><span class="pre">INITRAMFS_IMAGE_BUNDLE</span> <span class="pre">=</span> <span class="pre">&quot;1&quot;</span></code></li>
</ul>
</li>
<li>Set the meta-rasberrypi variable (in raspberrypi.conf for example)<ul>
<li><code class="docutils literal"><span class="pre">KERNEL_INITRAMFS</span> <span class="pre">=</span> <span class="pre">&quot;-initramfs&quot;</span></code></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="enable-spi-bus">
<span id="enable-spi-bus"></span><h2>Enable SPI bus<a class="headerlink" href="#enable-spi-bus" title="Permalink to this headline">¶</a></h2>
<p>When using device tree kernels, set this variable to enable the SPI bus:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ENABLE_SPI_BUS</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="enable-i2c">
<span id="enable-i2c"></span><h2>Enable I2C<a class="headerlink" href="#enable-i2c" title="Permalink to this headline">¶</a></h2>
<p>When using device tree kernels, set this variable to enable I2C:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ENABLE_I2C</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="enable-pitft-support">
<span id="enable-pitft-support"></span><h2>Enable PiTFT support<a class="headerlink" href="#enable-pitft-support" title="Permalink to this headline">¶</a></h2>
<p>Basic support for using PiTFT screens can be enabled by adding below in
local.conf:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">MACHINE_FEATURES</span> <span class="pre">+=</span> <span class="pre">&quot;pitft&quot;</span></code><ul>
<li>This will enable SPI bus and i2c device-trees, it will also setup
framebuffer for console and x server on PiTFT.</li>
</ul>
</li>
</ul>
<p>NOTE: To get this working the overlay for the PiTFT model must be build, added
and specified as well (dtoverlay=<driver> in config.txt).</p>
<p>Below is a list of currently supported PiTFT models in meta-raspberrypi, the
modelname should be added as a MACHINE_FEATURES in local.conf like below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">MACHINE_FEATURES</span> <span class="o">+=</span> <span class="s2">&quot;pitft &lt;modelname&gt;&quot;</span>
</pre></div>
</div>
<p>List of currently supported models:</p>
<ul class="simple">
<li>pitft22</li>
<li>pitft28r</li>
<li>pitft35r</li>
</ul>
</div>
<div class="section" id="misc-display">
<span id="misc-display"></span><h2>Misc. display<a class="headerlink" href="#misc-display" title="Permalink to this headline">¶</a></h2>
<p>If you would like to use the Waveshare &quot;C&quot; 1024×600, 7 inch Capacitive Touch
Screen LCD, HDMI interface (<a class="reference external" href="http://www.waveshare.com/7inch-HDMI-LCD-C.htm">http://www.waveshare.com/7inch-HDMI-LCD-C.htm</a>) Rev
2.1, please set the following in your local.conf:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">WAVESHARE_1024X600_C_2_1</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="enable-uart">
<span id="enable-uart"></span><h2>Enable UART<a class="headerlink" href="#enable-uart" title="Permalink to this headline">¶</a></h2>
<p>RaspberryPi 0, 1, 2 and CM will have UART console enabled by default.</p>
<p>RaspberryPi 0 WiFi and 3 does not have the UART enabled by default because this
needs a fixed core frequency and enable_uart wil set it to the minimum. Certain
operations - 60fps h264 decode, high quality deinterlace - which aren't
performed on the ARM may be affected, and we wouldn't want to do that to users
who don't want to use the serial port. Users who want serial console support on
RaspberryPi3 will have to explicitely set in local.conf:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ENABLE_UART</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</pre></div>
</div>
<p>Ref.:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/raspberrypi/firmware/issues/553">https://github.com/raspberrypi/firmware/issues/553</a></li>
<li><a class="reference external" href="https://github.com/RPi-Distro/repo/issues/22">https://github.com/RPi-Distro/repo/issues/22</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Optional build configuration</a><ul>
<li><a class="reference internal" href="#compressed-deployed-files">Compressed deployed files</a></li>
<li><a class="reference internal" href="#gpu-memory">GPU memory</a></li>
<li><a class="reference internal" href="#add-purchased-license-codecs">Add purchased license codecs</a></li>
<li><a class="reference internal" href="#disable-overscan">Disable overscan</a></li>
<li><a class="reference internal" href="#set-overclocking-options">Set overclocking options</a></li>
<li><a class="reference internal" href="#video-camera-support-with-v4l2-drivers">Video camera support with V4L2 drivers</a></li>
<li><a class="reference internal" href="#enable-offline-compositing-support">Enable offline compositing support</a></li>
<li><a class="reference internal" href="#enable-kgdb-over-console-support">Enable kgdb over console support</a></li>
<li><a class="reference internal" href="#boot-to-u-boot">Boot to U-Boot</a></li>
<li><a class="reference internal" href="#image-with-initramfs">Image with Initramfs</a></li>
<li><a class="reference internal" href="#enable-spi-bus">Enable SPI bus</a></li>
<li><a class="reference internal" href="#enable-i2c">Enable I2C</a></li>
<li><a class="reference internal" href="#enable-pitft-support">Enable PiTFT support</a></li>
<li><a class="reference internal" href="#misc-display">Misc. display</a></li>
<li><a class="reference internal" href="#enable-uart">Enable UART</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="layer-contents.html" title="previous chapter">Layer Contents</a></li>
      <li>Next: <a href="extra-apps.html" title="next chapter">Extra apps</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/extra-build-config.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, meta-raspberrypi contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/extra-build-config.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>